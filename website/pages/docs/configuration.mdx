import { Config, ESLintConfig } from "#/components/eslint-config";
import { Warning } from "#/components/callout";

# Configuration

This plugin provides the following configurations:

## Settings

### `importSource`

(type: `string`, default: `"react"`)

The source where React is imported from.\
This allows to specify a custom import location for React when not using the official distribution (e.g. `@pika/react`, etc).

### `jsxPragma`

(type: `string`, default: `"createElement"`)

The identifier that's used for JSX Element creation.\
This should not be a member expression (i.e. use `"createElement"` instead of `"React.createElement"`).

### `jsxPragmaFrag`

(type: `string`, default: `"Fragment"`)

The identifier that's used for JSX fragment elements.\
This should not be a member expression (i.e. use `"Fragment"` instead of `"React.Fragment"`).

### `version`

(type: `string`, default: `"detect"`)

React version to use, `"detect"` means auto detect React version from the project's dependencies.\
If `importSource` is specified, an equivalent version of React should be provided here.

### `additionalHooks`

(type: `[key: string]: string[]`, default: `{}`)

A object of aliases for React built-in hooks. ESLint React will recognize these aliases as equivalent to the built-in hooks in all its rules.\
This is intended to cover edge cases. We suggest to use this option very sparingly, if at all.\
(e.g. `{ useLayoutEffect: ["useIsomorphicLayoutEffect"] }`).

### `additionalComponents` (experimental)

<Warning>This is an experimental feature that can be unstable and lacks comprehensive documentation.</Warning>

An array of user-defined components, used to inform the ESLint React plugins how to treat these components during checks.\
This is intended to cover edge cases. We suggest to use this option very sparingly, if at all.

## Examples

### Basic Configuration

<ESLintConfig>

<Config>

```ts twoslash filename="eslint.config.js"
// ...
import react from "@eslint-react/eslint-plugin";

// ...
export default [
  // ...
  {
    files: ["**/*.{ts,tsx}"],
    ...react.configs.recommended,
    settings: {
      "react-x": {
        importSource: "react",
        jsxPragma: "createElement",
        jsxPragmaFrag: "Fragment",
        additionalHooks: {
          useLayoutEffect: ["useIsomorphicLayoutEffect"],
          // ...
        },
        additionalComponents: [
          {
            name: "Link",
            as: "a",
            attributes: [
              { name: "to", as: "href" },
              { name: "rel", as: "rel", defaultValue: "noopener noreferrer" },
            ],
          },
          // ...
        ],
        version: "detect",
      },
    },
  },
];
```

</Config>

<Config>

```js filename=".eslintrc.js"
// ...
module.exports = {
  // ...
  settings: {
    "react-x": {
      importSource: "react",
      jsxPragma: "createElement",
      jsxPragmaFrag: "Fragment",
      additionalHooks: {
        useLayoutEffect: ["useIsomorphicLayoutEffect"],
        // ...
      },
      additionalComponents: [
        {
          name: "Link",
          as: "a",
          attributes: [
            { name: "to", as: "href" },
            { name: "rel", as: "rel", defaultValue: "noopener noreferrer" },
          ],
        },
        // ...
      ],
      version: "detect",
    },
  },
};
```

</Config>

</ESLintConfig>

### Advanced Configuration (WIP)

<ESLintConfig>

<Config>

```ts twoslash filename="eslint.config.js"
// ...
import react from "@eslint-react/eslint-plugin";

// ...
export default [
  // ...
  {
    files: ["**/*.{ts,tsx}"],
    ...react.configs.recommended,
    settings: {
      "react-x": {
        importSource: "react",
        jsxPragma: "createElement",
        jsxPragmaFrag: "Fragment",
        additionalHooks: {
          useLayoutEffect: ["useIsomorphicLayoutEffect"],
          // ...
        },
        additionalComponents: [
          {
            name: "Button",
            selector: ":has(JSXAttribute[name.name='component'][value.value='a'])",
            as: "a",
            attributes: [
              { name: "href", as: "href" },
              { name: "rel", as: "rel", defaultValue: "noopener noreferrer" },
            ],
          },
          {
            name: "TextInput",
            selector: ":has(JSXAttribute[name.name='mode'][value.value='uncontrolled'])",
            as: "input",
            attributes: [
              { name: "text", as: "value", controlled: false },
              { name: "defaultText", as: "defaultValue" },
              { name: "onTextChange", as: "onChange" },
            ],
          },
          // ...
        ],
        version: "detect",
      },
    },
  },
  // ...
];
```

</Config>

<Config>

```js filename=".eslintrc.js"
// ...
module.exports = {
  // ...
  settings: {
    "react-x": {
      importSource: "react",
      jsxPragma: "createElement",
      jsxPragmaFrag: "Fragment",
      additionalHooks: {
        useLayoutEffect: ["useIsomorphicLayoutEffect"],
        // ...
      },
      additionalComponents: [
        {
          name: "Button",
          selector: ":has(JSXAttribute[name.name='component'][value.value='a'])",
          as: "a",
          attributes: [
            { name: "href", as: "href" },
            { name: "rel", as: "rel", defaultValue: "noopener noreferrer" },
          ],
        },
        {
          name: "TextInput",
          selector: ":has(JSXAttribute[name.name='mode'][value.value='uncontrolled'])",
          as: "input",
          attributes: [
            { name: "text", as: "value", controlled: false },
            { name: "defaultText", as: "defaultValue" },
            { name: "onTextChange", as: "onChange" },
          ],
        },
        // ...
      ],
      version: "detect",
    },
  },
  // ...
};
```

</Config>

</ESLintConfig>
